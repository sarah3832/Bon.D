{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="csrf-token" content="{{ csrf_token }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static '/css/diary/Mdiary_list.css'%}">
  <link rel="stylesheet" href="{% static '/css/home/main.css'%}">
  <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
  <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
  <title>ë‚´ ë‹¤ì´ì–´ë¦¬ ëª©ë¡</title> 
</head>

<!-- ê³µí†µ ìƒë‹¨ì¢Œì¸¡ë©”ë‰´ -->
<script>
  $(function() {
		// GNB í´ë¦­
		$('#menu ul li').on('click', function() {
			$('#menu ul li').removeClass('active');
			$(this).addClass('active');
		});

		// ê²€ìƒ‰ì°½
    $('#searchBtn').click(function(){
			$("#main_search").removeClass('closed').addClass('open');
			$('#s_overlay').addClass('show');
		});
	$('#search_closeBtn').click(function(){
		$("#main_search").removeClass('open').addClass('closed');
		$('#s_overlay').removeClass('show');
	});
	$('#s_overlay').click(function() { //ë°°ê²½ í´ë¦­í•˜ë©´ ë‹«íˆê²Œ
		$('#main_search').removeClass('open').addClass('closed');
		$('#s_overlay').removeClass('show');
	});
	// ê²€ìƒ‰ì°½ ê²€ìƒ‰ê¸°ëŠ¥
	$('.search_box input').on('keypress', function(event){
		if (event.key == 'Enter') {
			event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë°©ì§€
			// ì…ë ¥ê°’ê³¼ ì¼ì¹˜í•˜ëŠ” ì¼ê¸° ì°¾ê¸°
			ctitle = "{{Content.ctitle}}"
			cdate = "{{Content.cdate}}"
			ccontent = "{{Content.ccontent}}"
			cno = "{{Content.cno}}"
			//ajax êµ¬ë¬¸
			$.ajax({
				headers:{"X-CSRFToken":$("meta[name='csrf-token']").attr("content")},
				url:"/main/search/",
				type:"post",
				data:{"csearch":$("#csearch").val()}, //views.pyë°ì´í„° ë³´ëƒ„
				success:function(data){
					//data -> ë„˜ì–´ì˜¨ ê²€ìƒ‰ê²°ê³¼
					console.log("ë¦¬ìŠ¤íŠ¸ : "+data.list_qs)
					console.log("ë¦¬ìŠ¤íŠ¸ : "+data.list_qs[0])
					console.log("ë¦¬ìŠ¤íŠ¸ê°œìˆ˜ : "+data.list_qs.length)
					//htmlë³´ë‚´ëŠ” ë¶€ë¶„
					var hdata = ""
					// ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ê²½ìš°
					if (data.list_qs.length > 0){
						hdata += `<div id="search_result">ê²€ìƒ‰ ê²°ê³¼ <span>(${data.list_qs.length})</span></div>`
						for(var i=0;i<data.list_qs.length;i++){
							// cdateë¥¼ Date ê°ì²´ë¡œ ë³€í™˜ > 0ë…„0ì›”0ì¼ë¡œ í˜•ì‹ ë³€í™˜
							var cdate = new Date(data.list_qs[i].cdate);
							var formattedDate = cdate.getFullYear() + "ë…„ " + (cdate.getMonth() + 1) + "ì›” " + cdate.getDate() + "ì¼";
							hdata += `<div class="search_list"><a href="/diary/diary_view/${data.list_qs[i].cno}/" class="result-item">
								<span class="s_title"> ${data.list_qs[i].ctitle}</span>
								<span class="s_date">${formattedDate}</span>
								<img src="/static/images/home/right.png" alt="">
								</a>
								</div>`;
								}
					}else{
						// ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ê²½ìš°
						hdata += `<div id="search_result">ê²€ìƒ‰ ê²°ê³¼ <span>(${data.list_qs.length})</span></div>`
						hdata += `<div class="search_list"><a>
							<span class="s_title">ê²€ìƒ‰í•˜ì‹  ë‚´ìš©ê³¼ ì¼ì¹˜í•˜ëŠ” ê²°ê³¼ê°€ ì—†ì–´ìš”.</span>
							<span class="s_date"></span>
						</a></div>`;
					}
							$("#search_content").html(hdata);
						},
						error:function(){
							alert("ì—ëŸ¬")
						}
					})
				}
    });

	});

	// -------------ì•Œë¦¼ì°½-----------------
	$(function() {
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì•Œë¦¼ ìƒíƒœ í™•ì¸
    fetchNotifications();

    // ì•Œë¦¼ì°½ ì—´ê¸°
    $('#notiBtn').click(function() {
        $('#noti_side').removeClass('closed').addClass('open');
        $('#n_overlay').addClass('show');

        // ì•Œë¦¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        fetchNotifications();
    });

    // ì•Œë¦¼ì°½ ë‹«ê¸°
    $('#noti_closeBtn, #n_overlay').click(function() {
        $('#noti_side').removeClass('open').addClass('closed');
        $('#n_overlay').removeClass('show');
    });

    // ì•Œë¦¼ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    function fetchNotifications() {
        $.ajax({
            url: '/main/notification/', // ì•Œë¦¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ URL
            method: 'GET',
            success: function(data) {
                let hasUnread = false; // ì½ì§€ ì•Šì€ ì•Œë¦¼ ì—¬ë¶€
                let hdata = ""; // ì•Œë¦¼ ë‚´ìš©ì„ ë‹´ì„ HTML

                if (data.notifications.length > 0) {
                    data.notifications.forEach(function(notification) {
                        if (!notification.checked) {
                            hasUnread = true; // ì½ì§€ ì•Šì€ ì•Œë¦¼ ì¡´ì¬
                        }
                        hdata += `
                            <li class="noti_list ${notification.checked ? 'checked' : ''}" data-id="${notification.id}">
                                <a>
                                    <div>
                                        <img src="/static/images/home/default_profile.png" alt="í”„ë¡œí•„ì´ë¯¸ì§€">
                                    </div>
                                    <div>
                                        <p>${notification.message}</p>
                                        <p class="noti_date">${notification.ndate}</p>
                                    </div>
                                </a>
                            </li>
                        `;
                    });
                } else {
                    hdata = `
                        <li class="noti_list">
                            <p>ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </li>
                    `;
                }

                $('#noti_list').html(hdata); // ì•Œë¦¼ UI ì—…ë°ì´íŠ¸

                // ë¹¨ê°„ ì  í‘œì‹œ
                if (hasUnread) {
                    $('#notiBtn .notification-dot').show(); // ì½ì§€ ì•Šì€ ì•Œë¦¼ì´ ìˆìœ¼ë©´ ë¹¨ê°„ ì  í‘œì‹œ
                } else {
                    $('#notiBtn .notification-dot').hide(); // ì—†ìœ¼ë©´ ìˆ¨ê¹€
                }
            },
            error: function(error) {
                console.error('Error fetching notifications:', error);
            }
        });
    }

    // ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½ ë° ì½ìŒ ì²˜ë¦¬
    $('#noti_list').on('click', '.noti_list', function () {
        const notificationId = $(this).data('id'); // ì•Œë¦¼ ID ê°€ì ¸ì˜¤ê¸°

        if (notificationId) {
            $(this).addClass('read'); // ì½ìŒ ìƒíƒœë¡œ ë³€ê²½
            $(this).css('background-color', 'white'); // ì¦‰ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½

            // ì„œë²„ì— ì½ìŒ ìƒíƒœ ë™ê¸°í™” ìš”ì²­
            markNotificationAsRead(notificationId);
        }
    });

    // ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ í•¨ìˆ˜
    function markNotificationAsRead(notificationId) {
        $.ajax({
            url: `/main/notification_read/${notificationId}/`, // ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ URL
            method: 'POST',
            headers: { 'X-CSRFToken': $("meta[name='csrf-token']").attr("content") },
            success: function () {
                console.log('Notification marked as read.');
                // ì½ìŒ ìƒíƒœ ì—…ë°ì´íŠ¸ í›„ ë¹¨ê°„ ì  ì¬í™•ì¸
                fetchNotifications();
            },
            error: function (error) {
                console.error('Error marking notification as read:', error);
            }
        });
    }

    // 5ì´ˆë§ˆë‹¤ ì½ì§€ ì•Šì€ ì•Œë¦¼ ìƒíƒœ í™•ì¸
    setInterval(fetchNotifications, 5000);
  });
</script>
</head>
<body>
	<!-- ìµœìƒë‹¨ ë©”ë‰´ -->
	<div id="top_nav">
		<h1><a href="/main/index/"></a></h1>
		<ul class="top_menu">
			<li><a id="searchBtn"><img src="/static/images/home/search_icon.png" alt=""></a></li>
			<li>
				<a id="notiBtn">
						<img src="/static/images/home/bell_off_icon.png" alt="">
						<span class="notification-dot"></span> <!-- ë¹¨ê°„ì ì„ í‘œì‹œí•  ìš”ì†Œ ì¶”ê°€ -->
				</a>
		</li>
			<li><a href="/mypage/main/">ë§ˆì´í˜ì´ì§€</a></li>
		</ul>

	</div>

<!-- ì¢Œì¸¡ gnb -->
<div id="gnb">

  <!-- í”„ë¡œí•„ -->
  <div id="user_profile">
    <div id="pimg">
      <img src="{{ qb.img.url }}" alt="" />
    </div>
    <p id="uName">{{info.name}}</p>
    <p id="uEmail">{{info.mail}}</p>
  </div>

  <!-- Nav -->
  <nav id="menu">
    <ul>
      <a href="/main/index/"><li class="menu_item">ìš°ë¦¬ ê°€ì¡± ì´ì•¼ê¸°</li></a>
      <a href="/diary/diaryHome/"><li class="menu_item active">ë‹¤ì´ì–´ë¦¬</li></a>
      <a href="/emotion/main/"><li class="menu_item">ê°ì • ëŒì•„ë³´ê¸°</li></a>
      <a href="/family1/fam/"><li class="menu_item">ìš°ë¦¬ê°€ì¡±</li></a>
      <a href="/calendar1/cal/"><li class="menu_item">ìº˜ë¦°ë”</li></a>
      <a href="/customer/"><li class="menu_item">ì•Œë ¤ë“œë ¤ìš”</li></a>
    </ul>
  </nav>

  <!-- logout -->
  <div id="logout">
    <a href="/main/logout/"><span>ë¡œê·¸ì•„ì›ƒ</span></a>
  </div>
  
</div>

<!-- ê²€ìƒ‰ì°½ ìŠ¬ë¼ì´ë“œ -->
<div id="s_overlay" class="s_overlay"></div>
<div id="main_search" class="search_bar closed">
  <div id="input_wrap">
    <form action="/main/search/" method="POST" name="searchFrm" id="searchFrm">
      <div class="search_box">
        {% csrf_token %}
        <input type="text" id="csearch" placeholder="ë‹¤ì´ì–´ë¦¬ì—ì„œ ì°¾ê³  ì‹¶ì€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.">
        <img src="/static/images/home/search_icon.png" alt="">
      </div>
    </form>
      <button type="button" id="search_closeBtn">
        <img src="/static/images/home/close_icon.png" alt="ì•Œë¦¼ì°½ë‹«ê¸°">
      </button>
  </div>
    <div id="search_content">
      <div id="search_result">
      </div>
      <div class="search_list">
        <a>
          <span class="s_title">ì°¾ê³ ì í•˜ëŠ” ì¼ê¸°ë¥¼ ê²€ìƒ‰í•´ ë³´ì„¸ìš”.</span>
          <span class="s_date"></span>
        </a>
      </div>
    </div>
  </div>

<!-- ì•Œë¦¼ì°½ ìŠ¬ë¼ì´ë“œ -->
<div id="n_overlay" class="n_overlay"></div>
<div id="noti_side" class="sidebar closed">
  <div class="noti_header">
    <h2>ì•Œë¦¼</h2>
    <button id="noti_closeBtn"><img src="/static/images/home/close_icon.png" alt="ì•Œë¦¼ì°½ë‹«ê¸°"></button>
  </div>
  <ul id="noti_list">
    {% for notification in notifications %}
    <li class="noti_list {% if notification.checked %}checked{% endif %}">
        <a href="#">
            <div>
                <img src="/static/images/home/default_profile.png" alt="í”„ë¡œí•„ì´ë¯¸ì§€">
            </div>
            <div>
                <p>{{ notification.message }}</p>
                <p class="noti_date">{{ notification.ndate|date:"Y-m-d H:i" }}</p>
            </div>
        </a>
    </li>
    {% empty %}
    <li class="noti_list">
        <p>ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </li>
    {% endfor %}
</ul>
</div>

<!-- ê³µí†µ ìƒë‹¨ì¢Œì¸¡ë©”ë‰´ -->


<!-- ë‹¤ì´ì–´ë¦¬ ë¦¬ìŠ¤íŠ¸ -->
<div id="main_area">

  <div id="title_area">
    <p id="infoTit">
      {% comment %} {% if mdiary %} {% endcomment %}
      <p id="p_mtitle">{{mdiary.mtitle}}</p>
      <input type="text" name="i_mtitle" id="i_mtitle" value="{{mdiary.mtitle}}" style="display: none;">
      {% comment %} {% else %} {% endcomment %}
        {% comment %} ë‚´ ë‹¤ì´ì–´ë¦¬ ì´ë¦„ì„ ì„¤ì •í•´ ì£¼ì„¸ìš”. {% endcomment %}
      {% comment %} {% endif %} {% endcomment %}
        <span>
          <div id="modify_del_slide_1">
          <button type="button" id="addBtn">
          <img src="/static/images/customer/addBtn.png" alt="" id="openModal_1" style="cursor: pointer;">
          </button>
        </span>
        <span>
          <button type="button" class="wBtn"><a href="/diary/diaryWrite/"><img id="writeBtn" src="/static/images/diary/writeBtn.png" alt=""></a></button> 
          <div class="sub_menu_modal" id="sub_menu_modal_1">
            <div id="sub_menu_content">
              <button type="button" id="diaryEditBtn">ë‹¤ì´ì–´ë¦¬ ìˆ˜ì •</button>
              <button type="button" id="diaryDeleteBtn">ë‹¤ì´ì–´ë¦¬ ì‚­ì œ</button>
              <button type="button" id="diarySaveBtn" style="display:none">ì œëª© ë³€ê²½í•˜ê¸°</button>
              <button type="button" id="cancleBtn" style="display:none">ì·¨ì†Œ</button>
            </div>
          </div>
        </div>
      </span>
    </p>
    


    <p id="dateTit">{{mdiary.mdate|date:"Yë…„ mì›” dë¶€í„° ì”€"}}</p>
  </div>
  
  <div id="list_area">
    {% if content %}
    {% for c in content %}
    <div class="list_group">
      <a href="/diary/diary_view/{{c.cno}}/?pageNum={{forloop.revcounter}}">
        <div class="wrap_cont">
          {% if c.group_diary.all %}
          <span class="tit_post"><span class="num_txt">{{forloop.revcounter}}</span>{{c.ctitle}}<span class="img"></span></span>
          {% else %}
          <span class="tit_post"><span class="num_txt">{{forloop.revcounter}}</span>{{c.ctitle}}<span class="img"><img src="/static/images/diary/lock.png" alt=""></span></span>
          {% endif %}
          <p class="desc_cont">
            <span class="diaryTit">{{mdiary.mtitle}}</span><span class="space"> | </span>
            <span class="list_txt">{{c.ccontent}}
            </span>
          </p>
        </div>
        <dl class="list_post_info">
          <dd class="txt_g">
            <span>{{ c.cdate|date:"Y.m.d" }}</span><span class="space"> | </span>
          </dd>
        </dl>
      </a>
    </div>
    {% endfor %}
    {% else %}
    ì¼ê¸°ë¥¼ ì‘ì„±í•´ë´…ì‹œë‹¤!ğŸ™Œ
    {% endif %}
    </div>

  </div>

  <ul class="page_num">
    <!-- ì´ì „í˜ì´ì§€ í™•ì¸ -->
    {% if MdiaryList.has_previous %}
      <a href="?npage=1"><li class="first"><img src="/static/images/diary/left_double.png" alt=""></li></a>
      <a href="?npage={{MdiaryList.previous_page_number}}"><li class="prev"><img src="/static/images/diary/left.png" alt=""></li></a>
    {% else %}
      <li class="first"></li>
      <li class="prev"></li>
    {% endif %}

    <!-- ìˆœì°¨ì  í˜ì´ì§€ ë„˜ë²„ë§ -->
    {% for page in MdiaryList.paginator.page_range %}
      {% if page == MdiaryList.number %}
        <a href="#"><li class="nowNum"><strong>{{page}}</strong></li></a>
      {% else %}
        <a href="?npage={{page}}"><li class="num"><div>{{page}}</div></li></a>
    {% comment %} <li class="nowNum"><a href="#">1</a></li> {% endcomment %}
      {% endif %}
    {% endfor %}

    <!-- ì´í›„í˜ì´ì§€ í™•ì¸ -->
    {% if MdiaryList.has_next %}
      <a href="?npage={{diary.next_page_number}}"><li class="next"><img src="/static/images/diary/right.png" alt=""></li></a>
      <a href="?npage={{diary.paginator.num_pages}}"><li class="last"><img src="/static/images/diary/right_double.png" alt=""></li></a>
    {% else %}
      <li class="next"></li>
      <li class="last"></li>
    {% endif %}

  </ul>
</div>

<script>
  const csrftoken = '{{ csrf_token }}';
  // ë‹¤ì´ì–´ë¦¬ ì‚­ì œ
  $(function(){
    $("#diaryDeleteBtn").click(function(){
      if (confirm("ë‹¤ì´ì–´ë¦¬ ë‚´ìš©ì„ ì „ë¶€ ì‚­ì œí•˜ì‹œê² ì–´ìš”? ì‚­ì œ ì‹œ ë³µêµ¬ê°€ ë¶ˆê°€í•´ìš”.")) {
        location.href = "/diary/delete_all/";
      } else {
        // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ì•„ë¬´ ë™ì‘ë„ í•˜ì§€ ì•ŠìŒ
        return false;
      }
    });
  });

  // ë‹¤ì´ì–´ë¦¬ ì œëª© ìˆ˜ì •
  $(function(){
    $("#diaryEditBtn").click(function(){
      $("#p_mtitle").hide(); 
      $("#i_mtitle").show();
      $("#diaryEditBtn").hide();
      $("#diaryDeleteBtn").hide();
      $("#diarySaveBtn").show();
      $("#cancleBtn").show();
            
      // ì…ë ¥ ìƒìì— ì»¤ì„œë¥¼ ì´ë™
      // ì•½ê°„ì˜ ì§€ì—°ì„ ì¶”ê°€í•˜ì—¬ ì»¤ì„œë¥¼ í…ìŠ¤íŠ¸ ëìœ¼ë¡œ ì´ë™
      setTimeout(function() {
        const inputElement = document.getElementById('i_mtitle');
        setCursorToEnd(inputElement);
      }, 10); // 10ms ì§€ì—°

    });
  });

  // ì…ë ¥ ìƒìì— ì»¤ì„œë¥¼ í…ìŠ¤íŠ¸ ëìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” í•¨ìˆ˜
  function setCursorToEnd(inputElement) {
    const value = inputElement.value; // ì…ë ¥ ìƒìì˜ í˜„ì¬ ê°’
    inputElement.focus(); // ì…ë ¥ ìƒìë¥¼ í¬ì»¤ìŠ¤
    inputElement.setSelectionRange(value.length, value.length); // ì»¤ì„œë¥¼ í…ìŠ¤íŠ¸ ëìœ¼ë¡œ ì´ë™
  }

  // ì—”í„°í‚¤ ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
  $('#i_mtitle').on('keypress', function (event) {
    if (event.key === 'Enter') {
      event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë°©ì§€
      $("#diarySaveBtn").click(); // ì œëª© ë³€ê²½ ë²„íŠ¼ í´ë¦­ íŠ¸ë¦¬ê±°
    }
  });

  $(function(){
    $("#diarySaveBtn").click(function(){
        var newTitle = $("#i_mtitle").val();  // ì œëª© ê°’ì„ ê°€ì ¸ì˜¤ê¸°

        // ì œëª©ì´ 1ê¸€ì ë¯¸ë§Œì¼ ê²½ìš° ê²½ê³ 
        if(newTitle.length < 1){
            alert("ì œëª©ì€ 1ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }

        // ë‹¤ì´ì–´ë¦¬ ì œëª©ì„ ë³€ê²½í•  ê²ƒì¸ì§€ í™•ì¸
        if(confirm("ë‚´ ë‹¤ì´ì–´ë¦¬ ì œëª©ì„ ë³€ê²½í•˜ì‹œê² ì–´ìš”?")){
            // AJAX ìš”ì²­ì„ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°ì´í„° ì „ì†¡
            $.ajax({
                url: '/diary/titleChg/',  // ì„œë²„ë¡œ ë³´ë‚¼ URL
                headers: {
                  'X-CSRFToken': $('meta[name="csrf-token"]').attr('content')  // CSRF í† í° ì¶”ê°€
              },
                type: 'POST',
                data: {
                    mtitle: newTitle,  // ì œëª© ë°ì´í„°
                    csrfmiddlewaretoken: $('meta[name="csrf-token"]').attr('content')  // CSRF í† í° ì¶”ê°€
                },
                success: function(response){
                    // ì„±ê³µ ì‹œ ë‹¤ì´ì–´ë¦¬ ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    window.location.href = '/diary/MdiaryList/';
                },
                error: function(xhr, status, error){
                    // ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ë©”ì‹œì§€ ì¶œë ¥
                    alert("ë‹¤ì´ì–´ë¦¬ ì œëª© ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }
            });
        }
    });

  // ë‹¤ì´ì–´ë¦¬ ì œëª© ìˆ˜ì •ì·¨ì†Œ
  $(function(){
    $("#cancleBtn").click(function(){
      if(confirm("ì œëª© ìˆ˜ì •ì„ ì·¨ì†Œí•˜ì‹œê² ì–´ìš”?")){
        location.href = "/diary/MdiaryList/";
      }else{
        return false;
      }
    });
  });

});
      
      
  // ì²« ë²ˆì§¸ ëª¨ë‹¬ ì—´ê¸°
  document.getElementById('openModal_1').addEventListener('click', function() {
    var modal = document.getElementById('sub_menu_modal_1');
    console.log('ì²« ë²ˆì§¸ ëª¨ë‹¬ í´ë¦­ë¨');
    modal.classList.toggle('open'); // open í´ë˜ìŠ¤ê°€ ìˆìœ¼ë©´ ì œê±°, ì—†ìœ¼ë©´ ì¶”ê°€

    // ëª¨ë‹¬ì´ ì—´ë ¸ì„ ë•Œ ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    if (modal.classList.contains('open')) {
      console.log('ëª¨ë‹¬ì´ ì—´ë ¸ìŠµë‹ˆë‹¤.');
      var deleteBtn = document.getElementById('diaryDeleteBtn');
  }
  });

  
  // ì²« ë²ˆì§¸ ëª¨ë‹¬ ë‹«ê¸°
  document.getElementById('back_click').addEventListener('click', function() {
    console.log('ëª©ë¡ í´ë¦­ë¨');
    location.href='/customer/noticelist/'
  });
</script>

</body>
</html>